<?import com.comp2042.GameOverPanel?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.Group?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>
<?import java.net.URL?>


<?import javafx.geometry.Insets?>
<StackPane fx:controller="com.comp2042.GuiController"
            xmlns:fx="http://javafx.com/fxml"
            prefHeight="720" prefWidth="950"
            style="-fx-background-color: #1a1a2e;">

    <!--Main game area centered -->
    <HBox alignment="TOP_CENTER" spacing="10" StackPane.alignment="CENTER" style="-fx-padding: 60 0 0 0;">

        <!-- Left side panel - HOLD Box -->
        <VBox spacing="10" alignment="TOP_CENTER" maxHeight="160" maxWidth="120">

            <!-- HOLD section -->
            <VBox spacing="0" alignment="TOP_CENTER"
                  style="-fx-background-color: rgba(255, 255, 255, 0.95); -fx-background-radius: 8; -fx-border-color: #000000;
                  -fx-border-width: 3; -fx-border-radius: 8;"
                  prefWidth="120" prefHeight="660">

                <!-- Label HOLD as the Header-->
                <Label text="HOLD"
                       style="-fx-text-fill: #000000; -fx-font-weight: bold; -fx-font-size: 16px; -fx-padding: 8 0 5 0;"/>

                <!-- Separator Line-->
                <Region prefHeight="2" style="-fx-background-color: #000000;"/>

                <!-- Single next piece preview in tall box -->
                <VBox spacing="0" alignment="CENTER" style="-fx-padding: 15 10 15 10;">
                    <StackPane prefHeight="80" prefWidth="80"
                               style="-fx-background-color: #000000;">
                        <GridPane fx:id="holdPiecePanel"
                                  hgap="1" vgap="1"
                                  alignment="CENTER"/>
                    </StackPane>
                </VBox>

                <!-- Push HOLD box to the top -->
                <Region VBox.vgrow="ALWAYS"/>
            </VBox>
        </VBox>

        <!-- Game Board area -->
        <VBox alignment="TOP_CENTER">
            <StackPane>
                <!-- Main game board -->
                <BorderPane styleClass="gameBoard" fx:id="gameBoard"
                            prefHeight="660" prefWidth="300">
                    <center>
                        <GridPane fx:id="gamePanel" hgap="1" vgap="1"
                                    style="-fx-background-color: #0a0a15; -fx-border-color: #2a9fd6;
                                    -fx-border-width: 3;"/>
                    </center>
                </BorderPane>

                <!-- Current brick overlay -->
                <Group>
                    <GridPane fx:id="brickPanel" vgap="1" hgap="1"/>
                </Group>

                <!-- Notification overlay -->
                <Group fx:id="groupNotification" layoutX="14" layoutY="203">
                    <VBox alignment="CENTER">
                        <GameOverPanel fx:id="gameOverPanel"/>
                    </VBox>
                </Group>
            </StackPane>

        </VBox>

    <!-- Right side panel - NEXT piece Preview Box -->
        <VBox spacing="10" alignment="TOP_CENTER" maxWidth="120" maxHeight="160">

            <!-- NEXT section -->
            <VBox spacing="0" alignment="TOP_CENTER"
                  style="-fx-background-color: rgba(255, 255, 255, 0.95); -fx-background-radius: 8; -fx-border-color: #000000;
                  -fx-border-width: 3; -fx-border-radius: 8;"
                    prefHeight="660" prefWidth="120">

                <!-- Label Next as the Header-->
                <Label text="NEXT"
                       style="-fx-text-fill: #000000; -fx-font-weight: bold; -fx-font-size: 16px; -fx-padding: 8 0 5 0;"/>

                <!-- Separator Line-->
                <Region prefHeight="2" style="-fx-background-color: #000000;"/>

                <!-- Single next piece preview in tall box -->
                <VBox spacing="0" alignment="CENTER" style="-fx-padding: 15 10 15 10;">
                    <StackPane prefHeight="80" prefWidth="80"
                               style="-fx-background-color: #000000;">
                        <GridPane fx:id="nextPiecePanel"
                                  hgap="1" vgap="1"
                                  alignment="CENTER"/>
                    </StackPane>
                </VBox>

                <!-- Push NEXT PREVIEW box to top -->
                <Region VBox.vgrow="ALWAYS"/> <!-- Fills Remaining space Dynamically-->
            </VBox>

        </VBox>
    </HBox>
    <stylesheets>
        <URL value="@window_style.css"/>
    </stylesheets>
</StackPane>